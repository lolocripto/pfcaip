= Specification of the Modifications in Lucene Project =

  All the changes have been flagged with comments on an certain format to track the changes made from the "public" version, also, important comments made after detailed investigation/execution of the source code have been flagged too, the "flag" has been introduced in source code as "comments" (either with "//" or "/`*`"), the format of those comments are:

        * "AIP change code: comment of the change made and why"
        * "AIP comment: comment about what the code does in that part" 

    For the nature of the modifications, the affected package is mainly "org.apache.lucene.index". There are a few changes on "org.apache.lucene.search" as well, to lists the changes you can make a search with the previous comments (AIP flag). 

= Details =

  * [http://docs.google.com/View?id=dgjkgr6b_125cwqvb8cs Changes in Lucene source code to include CF parameter]


= Changes for parameters in a document level =

Â¿Is it possible to calculate any statistic parameter in a document level? Basically, according to what I've seen in the source code I think it is not possible, this is the list of the reasons:
 * If we want to associate the document number with a certain Term, we can face problems since that doc number might change after modification in the Index. According to the documentation:
_
  Note that a documents number may change, so caution should be taken when storing these numbers outside of Lucene. In particular, numbers may change in the following situations:
    * The numbers stored in each segment are unique only within the segment, and must be converted before they can be used in a larger context. The standard technique is to allocate each segment a range of values, based on the range of numbers used in that segment. To convert a document number from a segment to an external value, the segment's base document number is added. To convert an external value back to a segment-specific value, the segment is identified by the range that the external value is in, and the segment's base value is subtracted. For example two five document segments might be combined, so that the first segment has a base value of zero, and the second of five. Document three from the second segment would have an external value of eight.
    * When documents are deleted, gaps are created in the numbering. These are eventually removed as the index evolves through merging. Deleted documents are dropped when segments are merged. A freshly-merged segment thus has no gaps in its numbering.
_

 * It seems the documents are processed by adding all the terms in a structure and processing that structure without reference of the doc number, basically in each loop the terms of the documents are added to a globe "stream" of Terms and for each document that big "stream" is processed without recording the document number.

 * Everything in Lucene is thought with the "Field" concept and not "Document":
  * The same Term (e.g. 'aaa') in different fields are DIFFERENT Terms no matter the Document where the Term is included: this forbid us to include information at Document level in TermInfo object since they are sticked to a Field and not to a Document
  * The same Term (e.g. 'aaa') in different documents but the same field are THE SAME Term


[ProjectDescription Return to Project Description Page]